@if (isLoading()) {
  <div class="container-fluid">
    <br />
    <div class="row">
      <div class="col-12 text-center pt-4">
        <nz-spin nzTip="Getting data..." nzSize="large"></nz-spin>
      </div>
    </div>
  </div>
}

@if (hasData()) {
  <h3>Analytics</h3>
  <div class="container-fluid">
    <p>
      You have logged {{totalWorkouts()}} workouts since
      {{firstWorkoutDate() | date:'M/d/yyyy'}}.
    </p>
    <p>
      Here's the breakdown of each target area and the number of times you've completed a workout that includes it:
    </p>
    <table>
      <thead>
        <tr>
          <th>Target Area</th>
          <th>Workouts Completed</th>
        </tr>
      </thead>
      <tbody>
        @for (workout of executedWorkoutsSummary()!.targetAreasWithWorkoutCounts | keyvalue; track workout.key) {
          <tr>
            <td>{{workout.key}}</td>
            <td class="text-center" [innerHTML]="workout.value | zeroIsBad"></td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}

@if (hasError()) {
  <div class="container-fluid">
    <div class="alert alert-danger" role="alert">
      <h4 class="alert-heading">Error Loading Analytics</h4>
      <p>{{errorMessage()}}</p>
      <hr>
      <button type="button" class="btn btn-outline-danger" (click)="retryLoadData()">
        <i class="fa fa-refresh" aria-hidden="true"></i> Try Again
      </button>
    </div>
  </div>
}